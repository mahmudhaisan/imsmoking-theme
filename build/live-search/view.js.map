{"version":3,"file":"live-search/view.js","mappings":"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","sources":["webpack://imsmoking-theme/./src/live-search/view.js"],"sourcesContent":["(function () {\n  var containers = document.querySelectorAll('[data-live-search-uid]');\n\n  containers.forEach(function (container) {\n    var uid = container.getAttribute('data-live-search-uid');\n    var overlay = container.querySelector('#' + uid + '-overlay');\n    var toggle = container.querySelector('.ls-toggle');\n    var closeBtn = overlay.querySelector('.ls-close');\n    var clearBtn = overlay.querySelector('.ls-clear');\n    var input = overlay.querySelector('.ls-input');\n    var resultsContainer = overlay.querySelector('.ls-results');\n\n    function open() {\n      overlay.classList.add('is-active');\n      overlay.setAttribute('aria-hidden', 'false');\n      if (toggle) toggle.setAttribute('aria-expanded', 'true');\n      document.body.classList.add('ls-open');\n      setTimeout(() => input && input.focus(), 120);\n    }\n\n    function close() {\n      overlay.classList.remove('is-active', 'is-expanded');\n      overlay.setAttribute('aria-hidden', 'true');\n      if (toggle) toggle.setAttribute('aria-expanded', 'false');\n      document.body.classList.remove('ls-open');\n      toggle && toggle.focus();\n    }\n\n    toggle && toggle.addEventListener('click', e => {\n      e.preventDefault();\n      open();\n    });\n\n    closeBtn && closeBtn.addEventListener('click', e => {\n      e.preventDefault();\n      close();\n    });\n\n    clearBtn && clearBtn.addEventListener('click', e => {\n      e.preventDefault();\n      input.value = '';\n      resultsContainer.innerHTML = '';\n      overlay.classList.remove('is-expanded');\n      input.focus();\n    });\n\n    // Escape key closes overlay\n    document.addEventListener('keydown', e => {\n      if ((e.key === 'Escape' || e.keyCode === 27) && overlay.classList.contains('is-active')) {\n        close();\n      }\n    });\n\n    // Typing expands overlay\n    let controller;\n    input.addEventListener('input', function () {\n      const term = input.value.trim();\n\n      if (term.length > 0) {\n        overlay.classList.add('is-expanded');\n      } else {\n        overlay.classList.remove('is-expanded');\n      }\n\n      resultsContainer.innerHTML = '';\n      if (!term) return;\n\n      // Spinner\n      const spinner = document.createElement('div');\n      spinner.className = 'ls-spinner';\n      resultsContainer.appendChild(spinner);\n\n      if (controller) controller.abort();\n      controller = new AbortController();\n\n      fetch(`/wp-json/wp/v2/product?search=${encodeURIComponent(term)}&per_page=6&_embed`, { signal: controller.signal })\n        .then(res => res.json())\n        .then(products => {\n          resultsContainer.innerHTML = '';\n\n          if (!Array.isArray(products) || products.length === 0) {\n            resultsContainer.innerHTML = '<p>No products found.</p>';\n            return;\n          }\n\n          products.forEach(p => {\n            const link = p.link;\n            const title = p.title.rendered;\n            const imgSrc = p._embedded?.['wp:featuredmedia']?.[0]?.source_url || '';\n            const productEl = document.createElement('a');\n            productEl.href = link;\n            productEl.className = 'ls-product';\n            productEl.innerHTML = `<img src=\"${imgSrc}\" alt=\"${title}\"><span>${title}</span>`;\n            resultsContainer.appendChild(productEl);\n          });\n\n          // Add \"View All Results\"\n          const viewAll = document.createElement('a');\n          viewAll.className = 'ls-view-all';\n          viewAll.href = `/?s=${encodeURIComponent(term)}&post_type=product`;\n          viewAll.textContent = 'View All Results';\n          resultsContainer.appendChild(viewAll);\n        })\n        .catch(err => {\n          resultsContainer.innerHTML = '';\n          if (err.name !== 'AbortError') console.error(err);\n        });\n    });\n  });\n})();\n"],"names":["containers","document","querySelectorAll","forEach","container","uid","getAttribute","overlay","querySelector","toggle","closeBtn","clearBtn","input","resultsContainer","open","classList","add","setAttribute","body","setTimeout","focus","close","remove","addEventListener","e","preventDefault","value","innerHTML","key","keyCode","contains","controller","term","trim","length","spinner","createElement","className","appendChild","abort","AbortController","fetch","encodeURIComponent","signal","then","res","json","products","Array","isArray","p","link","title","rendered","imgSrc","_embedded","source_url","productEl","href","viewAll","textContent","catch","err","name","console","error"],"sourceRoot":""}